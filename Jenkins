node {
    stage('github'){
        git branch: 'master', credentialsId: 'jenkins', url: 'https://github.com/vinodalam/29th-date-task.git'
    }
    stage('docker.sock-permission'){
          sh 'chmod -R 777 /var/run/docker.sock'
    }
      stage('docker image'){
    sh 'docker build -t dockerfile /var/lib/jenkins/workspace/vinod'
    }
    stage('docker-login'){
        withCredentials([string(credentialsId: 'dock', variable: 'cred')]) {
            sh "docker login -u alamvinod -p ${cred}"
        }
        stage('docker push'){
            "sh 'docker push alamvinod/project:late'"
        }
    }
}
